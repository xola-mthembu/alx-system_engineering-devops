#!/usr/bin/env bash
# Script to install and configure Nginx to serve a custom HTML page

# Exit on any error to prevent unexpected behavior
set -e

# Update the package list and install Nginx
apt-get update
apt-get install -y nginx

# Ensure the Nginx document root exists and set the custom HTML page
echo "Hello World!" > /var/www/html/index.html

# Disable the default site to ensure Nginx serves your custom page
if [ -L /etc/nginx/sites-enabled/default ]; then
    unlink /etc/nginx/sites-enabled/default
fi

# Reload (not restart) Nginx to apply minimal downtime changes
service nginx reload

# Ensure Nginx is enabled to start on boot
update-rc.d nginx defaults
