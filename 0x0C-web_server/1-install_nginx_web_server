#!/usr/bin/env bash
# Installs Nginx with the following configurations:
# - Listens on port 80.
# - Returns a page containing "Hello World!" when queried at the root with a curl GET request.

# Exit on any error
set -e

# Update the package lists for available software packages.
apt-get update

# Install the Nginx web server.
apt-get install -y nginx

# Define the document root directory
DOC_ROOT="/var/www/html"

# Ensure the document root directory exists
mkdir -p $DOC_ROOT

# Create an index.html file and set its content to "Hello World!"
echo "Hello World!" > $DOC_ROOT/index.html

# Configure Nginx to listen on port 80 and serve files from the document root directory
cat <<EOF > /etc/nginx/sites-available/default
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    root $DOC_ROOT;
    index index.html index.htm;
}
EOF

# Reload Nginx to apply the configuration changes.
service nginx reload
