#!/usr/bin/env bash
# Script to parse Apache log, group by IP and HTTP status, and sort by occurrence

# Use awk to extract IP and HTTP status, count occurrences, and sort the results
awk '{print $1, $9}' apache-access.log | \
awk '{
    # Increment the count for each IP and status code combination
    count[$0]++
} END {
    # Output the count followed by the IP and status code
    for (combo in count)
        print count[combo], combo
}' | sort -nrk1
